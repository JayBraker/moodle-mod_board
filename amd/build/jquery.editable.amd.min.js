function _typeof(a){"@babel/helpers - typeof";if("function"==typeof Symbol&&"symbol"==typeof Symbol.iterator){_typeof=function(a){return typeof a}}else{_typeof=function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a}}return _typeof(a)}define ("mod_board/jquery.editable.amd",function(){(function(a,b){'use strict';var c=a(b),d=!1,e=!1,f=("ontouchend"in b),g="tinyMCE"in b&&"function"==typeof b.tinyMCE.init,h=a.fn.is,i=0,j=function(){var b=new Date().getTime();if(250>b-i){a(this).trigger("dbltap")}i=b},k=function(a){if(13==a.keyCode&&a.data.closeOnEnter){e.editable("close")}else if(27==a.keyCode){d.val(e.attr("orig-text"));e.editable("close")}else if(a.data.toggleFontSize&&a.metaKey&&(38==a.keyCode||40==a.keyCode)){var b=parseInt(d.css("font-size"),10);b+=40==a.keyCode?-1:1;d.css("font-size",b+"px");return!1}},l=function(){if(d[0].scrollHeight!==parseInt(d.attr("data-scroll"),10)){d.css("height",d[0].scrollHeight+"px");d.attr("data-scroll",d[0].scrollHeight)}},m=function(a,b,c){a.removeAttr("data-is-editing");if(0==b.length&&c){a.html(c);a.attr("data-is-empty","empty")}else{a.html(b);a.removeAttr("data-is-empty")}d.remove()},n=function(f,g){if(f.is(":editing")){return}e=f;f.attr("data-is-editing","1");if(f.is(":empty")){f.removeAttr("data-is-empty");f.html("")}var h=a.trim(f.html()),i=f.css("font-size"),j=f.height(),n="width: 96%; padding:0; margin:0; border:0; background:none;font-family: "+f.css("font-family")+"; font-size: "+f.css("font-size")+";font-weight: "+f.css("font-weight")+";";f.attr("orig-text",h);if(g.lineBreaks){h=h.replace(/<br( |)(|\/)>/g,"\n")}d=a("<textarea></textarea>");f.text("");n+="position: static";if(!1!==g.tinyMCE){var o="editable-area-"+new Date().getTime();d.val(h).appendTo(f).attr("id",o);if("object"!=_typeof(g.tinyMCE)){g.tinyMCE={}}g.tinyMCE.mode="exact";g.tinyMCE.elements=o;g.tinyMCE.width=f.innerWidth();g.tinyMCE.height=f.height()+200;g.tinyMCE.theme_advanced_resize_vertical=!0;g.tinyMCE.setup=function(b){b.onInit.add(function(b){var i=b.getWin(),j=!1,k=function(){var i=a(b.getDoc()).find("body").html();if(a(i).get(0).nodeName==f.get(0).nodeName){i=a(i).html()}m(f,i,g.emptyMessage);b.remove();d=!1;c.unbind("click",k);e=!1;if("function"==typeof g.callback){g.callback({content:i==h||!j?!1:i,fontSize:!1,$el:f})}};setTimeout(function(){c.bind("click",k)},500);d=a("<textarea></textarea>");d.bind("blur",k);i.onkeydown=function(){j=!0};i.focus()})};b.tinyMCE.init(g.tinyMCE)}else{if(g.toggleFontSize||g.closeOnEnter){c.bind("keydown",g,k)}c.bind("keyup",l);d.html(h).blur(function(){e=!1;var b=a.trim(d.val()),j=d.css("font-size");b=a("<div />").text(b).html();if(g.lineBreaks){b=b.replace(/\n/g,"<br />")}m(f,b,g.emptyMessage);if(j!=i){f.css("font-size",j)}c.unbind("keydown",k);c.unbind("keyup",l);if("function"==typeof g.callback){g.callback({content:b==h?!1:b,fontSize:j==i?!1:j,$el:f})}}).attr("style",n).appendTo(f).css({margin:0,padding:0,height:j+"px",overflow:"hidden"}).css(g.editorStyle).focus().get(0).select();l()}f.trigger("edit",[d])},o=function(b){if(!1!==e&&!e.children("textarea").is(p)){e.editable("close");n(a(this),b.data)}else{n(a(this),b.data)}return!1};a.fn.editable=function(b){if("string"==typeof b){if(this.is(":editable")){switch(b){case"open":if(!this.is(":editing")){this.trigger(this.attr("data-edit-event"))}break;case"close":if(this.is(":editing")){d.trigger("blur")}break;case"destroy":if(this.is(":editing")){d.trigger("blur")}this.unbind(this.attr("data-edit-event"));this.removeAttr("data-edit-event");break;default:}}}else{if(this.is(":editable")){this.editable("destroy")}b=a.extend({event:"dblclick",touch:!0,lineBreaks:!0,toggleFontSize:!0,closeOnEnter:!1,emptyMessage:!1,tinyMCE:!1,editorStyle:{}},b);if(!1!==b.tinyMCE&&!g){b.tinyMCE=!1}if(f&&b.touch){b.event="dbltap";this.unbind("touchend",j);this.bind("touchend",j)}else{b.event+=".textEditor"}this.bind(b.event,b,o);this.attr("data-edit-event",b.event);if(0==this.html().length&&b.emptyMessage){this.html(b.emptyMessage);this.attr("data-is-empty","empty")}else{this.removeAttr("data-is-empty")}}return this};a.fn.is=function(a){if("string"==typeof a&&0===a.indexOf(":")){if(":editable"==a){return this.attr("data-edit-event")!==void 0}else if(":editing"==a){return this.attr("data-is-editing")!==void 0}else if(":empty"==a){return this.attr("data-is-empty")!==void 0}}return h.apply(this,arguments)};var p;a(document).mousedown(function(b){p=a(b.target)})})(window.jQuery,window)});
//# sourceMappingURL=jquery.editable.amd.min.js.map
